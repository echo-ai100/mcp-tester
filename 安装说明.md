# MCP Tester 0.0.2 修复版安装说明

## 修复内容

本版本修复了提示词参数处理的重大问题：

✅ **修复了无参数提示词获取失败的问题**  
✅ **修复了参数输入框逻辑**  
✅ **添加了必需参数验证**  
✅ **符合MCP协议规范**

## 快速安装

### 文件信息
- **文件名**：`mcp-tester-0.0.2-fixed.vsix`
- **文件大小**：3.9 MB
- **版本**：0.0.2

### 安装步骤

#### 方法1：VSCode图形界面（推荐）

1. 打开 **VSCode**
2. 按下快捷键：
   - macOS: `Cmd + Shift + P`
   - Windows/Linux: `Ctrl + Shift + P`
3. 在命令面板中输入：`Extensions: Install from VSIX...`
4. 选择文件：`mcp-tester-0.0.2-fixed.vsix`
5. 等待安装完成
6. **重启VSCode**（重要！）

#### 方法2：命令行安装

在项目目录下执行：
```bash
code --install-extension mcp-tester-0.0.2-fixed.vsix
```

然后重启VSCode。

## 使用说明

### 1. 打开MCP Tester

安装后，有三种方式打开：

- **方式1**：点击VSCode左侧活动栏的 MCP Tester 图标
- **方式2**：命令面板 (`Cmd+Shift+P`) → 输入 `MCP: Open MCP Tester`
- **方式3**：点击状态栏的MCP连接状态

### 2. 连接MCP服务器

1. 在MCP Tester界面点击"连接"
2. 配置服务器信息：
   - **STDIO**：指定命令和参数
   - **SSE**：指定服务器URL
   - **Streamable HTTP**：指定服务器URL
3. 点击"连接"按钮

### 3. 获取提示词

#### 无参数提示词
1. 在"提示词"标签页查看可用提示词
2. 点击提示词右侧的"获取"按钮
3. ✅ 直接显示提示词内容

#### 有参数提示词
1. 点击提示词右侧的"获取"按钮
2. ✅ 自动弹出参数输入框
3. 填写参数（必需参数标有红色 `*` 号）
4. 点击"获取提示词"按钮
5. ✅ 显示生成的提示词内容

## 修复验证

安装后请测试以下场景，确保修复生效：

| 场景 | 操作 | 预期结果 |
|------|------|---------|
| 无参数提示词 | 点击"获取" | ✅ 直接成功获取 |
| 可选参数不填 | 不填参数，点击"获取" | ✅ 成功获取默认内容 |
| 必需参数不填 | 不填必需参数 | ✅ 提示"参数 xxx 是必需的" |
| 填写参数 | 填写参数后获取 | ✅ 成功获取带参数内容 |

## 常见问题

### Q1: 安装后扩展不显示？
**A**: 请确保已经重启VSCode。如果还不显示，检查扩展列表中是否已启用MCP Tester。

### Q2: 还是报错 "Missing required arguments"？
**A**: 请确认：
1. 是否安装了正确的版本（0.0.2-fixed）
2. 是否已重启VSCode
3. 清除浏览器缓存后重试

### Q3: 如何卸载旧版本？
**A**: 
1. 打开VSCode扩展面板
2. 找到"MCP Tester"
3. 点击齿轮图标 → 卸载
4. 重启VSCode后再安装新版本

### Q4: 参数输入框没有弹出？
**A**: 
1. 确认提示词确实有参数定义
2. 检查浏览器控制台是否有错误
3. 尝试重新连接MCP服务器

## 技术细节

### 修复的文件
1. **前端**：`src/vue-webview/src/components/tabs/PromptsTab.vue`
   - 只发送非空字符串的参数
   - 空的可选参数不发送

2. **后端**：`src/server/mcp-server-manager.ts`
   - 检测空参数对象
   - 符合MCP协议：无参数时省略arguments字段

### 完整修复文档
详细的技术文档请查看：
- `PROMPT_ARGS_FIX.md` - 完整修复说明
- `PROMPT_FIX_SUMMARY.md` - 第一版修复总结（已废弃）

## 反馈

如有问题或建议，请通过以下方式反馈：
- 提交Issue
- 联系维护者

---

**版本**：0.0.2-fixed  
**发布日期**：2025-10-25  
**状态**：✅ 已测试编译通过
